<view class="section-header">
  <team-card-big
    name="{{name}}"
    img="{{logoUrl}}"
    number="{{playerList.length}}"
    teamId="{{id}}"
    has_button="{{true}}">
    <view>
      <view wx:if="{{!favorited}}">
        <image class="favorite-button" src="/assets/unfavorited.png" mode="scaleToFill" catch:tap="favorite" />
      </view>
      <view wx:else>
        <image class="favorite-button" src="/assets/favorited.png" mode="scaleToFill" catch:tap="unfavorite" />
      </view>
    </view>
  </team-card-big>
</view>

<view class="tabs modern-card">
  <view class="tab {{activeIndex==0?'active':''}}" data-index="0" bindtap="switchTab">
    <text class="tab-text">信息</text>
    <view class="tab-indicator {{activeIndex==0?'active':''}}"></view>
  </view>
  <view class="tab {{activeIndex==1?'active':''}}" data-index="1" bindtap="switchTab">
    <text class="tab-text">赛程</text>
    <view class="tab-indicator {{activeIndex==1?'active':''}}"></view>
  </view>
  <view class="tab {{activeIndex==2?'active':''}}" data-index="2" bindtap="switchTab">
    <text class="tab-text">球员</text>
    <view class="tab-indicator {{activeIndex==2?'active':''}}"></view>
  </view>
</view>

<view class="tab-content">

  <view wx:if="{{activeIndex == 0}}">

    <view class="block-container modern-card">
      <view class="modern-card-header"></view>
      <view class="block-top">
        <text class="block-title primary-color text-bold">球队简介</text>
      </view>
      <view class="block-main">
        <text class="team-description">{{description === null? '暂无简介' : description}}</text>
      </view>
    </view>

    <view class="block-container modern-card">
      <view class="modern-card-header"></view>
      <view class="block-top">
        <text class="block-title primary-color text-bold">功能</text>
      </view>
      <view class="function-container">
        <view bindtap="gotoHonorPage" class="function-button modern-card">
          <image src="/assets/event.png" mode="scaleToFill" class="function-image" />
          <text class="function-text primary-color">荣誉墙</text>
        </view>
        <view bindtap="gotoRetiredPlayersPage" class="function-button modern-card">
          <image src="/assets/coach_selected.png" mode="scaleToFill" class="function-image" />
          <text class="function-text primary-color">退役球员</text>
        </view>
      </view>
    </view>

    <!-- 球队统计信息 -->
    <view class="block-container modern-card">
      <view class="modern-card-header"></view>
      <view class="block-top">
        <text class="block-title primary-color text-bold">球队统计</text>
      </view>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{teamStats ? teamStats.eventCount : 0}}</text>
          <text class="stat-label">赛事</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{teamStats ? teamStats.matchCount : 0}}</text>
          <text class="stat-label">比赛</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{teamStats ? teamStats.totalGoalsScored : 0}}</text>
          <text class="stat-label">总进球</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{teamStats ? teamStats.totalGoalsConceded : 0}}</text>
          <text class="stat-label">总失球</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{teamStats ? teamStats.totalYellowCards : 0}}</text>
          <text class="stat-label">黄牌</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{teamStats ? teamStats.totalRedCards : 0}}</text>
          <text class="stat-label">红牌</text>
        </view>
      </view>
    </view>
  </view>

  <view wx:if="{{activeIndex == 1}}">
    <view class="block-container modern-card">
      <view class="modern-card-header"></view>
      <view class="block-top flex-between">
        <text class="block-title primary-color text-bold">赛程</text>
        <text class="block-more primary-color" bind:tap="gotoMatchesPage" data-list="{{matchList}}">查看更多</text>
      </view>
      <view class="block-main">
        <scroll-view scroll-x enable-flex class="scroll-container">
          <match-card-small wx:for="{{matchList}}" wx:key="matchId" name="" stage="" tag="" team1="{{item.homeTeam.name}}" team2="{{item.awayTeam.name}}" icon1="{{item.homeTeam.logoUrl}}" icon2="{{item.awayTeam.logoUrl}}" score1="{{item.homeTeamScore}}" score2="{{item.awayTeamScore}}" penalty1="{{item.homeTeamPenalty}}" penalty2="{{item.awayTeamPenalty}}" time="{{item.strTime}}" hasBegun="{{item.hasBegun}}" bind:tap="gotoMatchPage" data-id="{{item.matchId}}" data-event="{{name}}"> </match-card-small>
        </scroll-view>
      </view>
    </view>
  </view>

  <view wx:if="{{activeIndex == 2}}">
    <!-- 教练团队卡片 -->
    <view class="block-container modern-card" wx:if="{{coachList}}">
      <view class="modern-card-header"></view>
      <view class="block-top">
        <text class="block-title primary-color text-bold">教练团队</text>
      </view>
      <view class="block-main">
        <view class="coach-list">
          <user-card-big
            wx:for="{{coachList}}"
            wx:key="coachId"
            img="{{item.photoUrl}}"
            name="{{item.name}}"
            isCoach="true"
            bind:tap="gotoCoachPage"
            data-id="{{item.coachId}}">
          </user-card-big>
        </view>
      </view>
    </view>

    <!-- 球员卡片 -->
    <view class="block-container modern-card">
      <view class="modern-card-header"></view>
      <view class="block-top">
        <text class="block-title primary-color text-bold">球员</text>
      </view>
      <view class="block-main">
        <scroll-view scroll-x enable-flex class="scroll-container">
          <player-card-small
            wx:for="{{playerList}}"
            wx:key="playerId"
            img="{{item.photoUrl}}"
            name="{{item.name}}"
            number="{{item.number}}"
            bind:tap="gotoPlayerPage"
            data-id="{{item.playerId}}">
          </player-card-small>
        </scroll-view>

        <!-- 查看统计数据按钮 -->
        <view class="stats-button-container">
          <view class="stats-button modern-card" bind:tap="gotoPlayerStatsPage">
            <text class="stats-button-text primary-color">查看详细统计数据</text>
            <text class="stats-button-icon">→</text>
          </view>
        </view>
      </view>
    </view>
  </view>

</view>